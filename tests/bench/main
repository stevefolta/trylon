trylon Bench

main: args
	bench = BenchObject new
	start-time = System milliseconds
	num-sends = bench nfibs: 35
	time = System milliseconds - start-time
	print-line: "nfibs: 35 = " + num-sends string
	print-line: time string + " milliseconds"
	sends-per-second = num-sends float / (time float / 1000.0)
	if sends-per-second > 1000000.0
		send: (sends-per-second / 1000000.0, " MILLION sends per second.")
	else
		send: (sends-per-second, " sends per second.")
	return 0


class BenchObject
	create
		# Nothing to do.

	nfibs: n
		if n < 2
			return 2 	# Call to nfibs + call to <
		else
			# 6 = nfibs, <, -, -, +, +
			return (nfibs: n - 1) + (nfibs: n - 2) + 6

