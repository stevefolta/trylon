trylon TryStatement
superclass Statement

fields body catch-clauses post-clauses-comments


create: body catch-clauses: catch-clauses comment: comment 	--
		post-clauses-comments: post-clauses-comments
	this body = body
	this catch-clauses = catch-clauses
	this comment = comment
	this post-clauses-comments = post-clauses-comments


attach-else: statement line: line
	object-proto = the-compiler get-standard-class: "Object"
	clause = 	--
		CatchClause 	--
			new: object-proto parent: body parent 	--
			comment: nil pre-clause-comments: nil
	catch-clauses append: clause


prepare-to-emit
	body prepare-to-emit
	for clause in catch-clauses
		clause body prepare-to-emit


jolt-expression
	catch-list = Expression new: catch-clauses count
	index = 0
	for clause in catch-clauses
		catch-list at: index put: clause jolt-expression
		index += 1
	return Expression with: 'catch' with: catch-list with: body jolt-expression


